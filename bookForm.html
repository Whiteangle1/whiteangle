<html>
    <head>
        <title>
            Book Form
        </title>
    </head>
    <body>
        <h1>Adding New book</h1>
        <form method="post" id="bookForm"
        action="http://localhost:5000/book"
        onsubmit="window.open('http://localhost:5000/')">

        <input type="hidden" id="id" name="id" value="">
        <table border="1">
            <tr>
                <th>Particular</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>Book Name</td>
                <td><input type="text" name="name">
            </tr>
            <tr>
                <td>Book Author</td>
                <td><input type="text" name="author">
            </tr>
            <tr>
                <td>Book Genre</td>
                <td>
                    <select name="genre">
                        <option value="">Select</option>
                        <option value="Programming">Programming</option>
                        <option value="fiction">fiction</option>
                        <option value="reference">reference</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Publication Year</td>
                <td>
                    <select name="pubyear">
                        <option value="">Select</option>
                        <option value="1990">1990</option>
                        <option value="1990">1991</option>
                        <option value="1990">1992</option>
                        <option value="1990">1993</option>
                        <option value="1990">1994</option>
                        <option value="1990">1995</option>
                        <option value="1990">1996</option>
                        <option value="1990">1997</option>
                        <option value="1990">1998</option>
                        <option value="1990">1999</option>
                        <option value="2000">2000</option>
                        
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="submit" id="submit" value="Add" >
                </td>
            </tr>
        </table>
    </form>
    <script>
        const queryString =window.location.search;
        const urlParams=new URLSearchParams(queryString);
        const inputId= urlParams.get('id');

        if(inputId){
            fetch("http://localhost:5000/"+inputId)
            .then(response =>{
                return response.json();
            })
            .then(data=>updateData(data))
            .catch(err => console.log("Error:",err))
        }
        function updateData(data){
            var bookName=document.getElementsByName("name");
            bookName[0].value=data.name;
            
            var bookAuthor=document.getElementsByName("author");
            bookName[0].value=data.author;

            var bookGenre=document.getElementsByName("genre");
            bookName[0].value=data.genre;

            var PubYear=document.getElementsByName("pubyear");
            bookName[0].value=data.pubyear;

            var bookId=document.getElementsById("id");
            bookName[0].value=inputId;


            var submit=document.getElementsByName("submit");
            bookName[0].value="Update";
    </script>
    </body>
</html>